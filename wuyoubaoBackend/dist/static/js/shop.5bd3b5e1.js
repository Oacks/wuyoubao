(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop"],{"0987":function(t,e,a){},4044:function(t,e,a){"use strict";var l=a("7eed"),s=a.n(l);s.a},"40c1":function(t,e,a){},"496d":function(t,e,a){"use strict";var l=a("0987"),s=a.n(l);s.a},"607e":function(t,e,a){"use strict";var l=a("f52f"),s=a.n(l);s.a},"6fc2":function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crop-demo"},[a("div",{staticClass:"crop-demo-btn"},[t._v("选择图片\n            "),a("input",{staticClass:"crop-input",attrs:{type:"file",name:"image",accept:"image/*"},on:{change:t.setImage}})]),a("img",{directives:[{name:"show",rawName:"v-show",value:t.imgSrc,expression:"imgSrc"}],staticClass:"pre-img",attrs:{src:t.imgSrc}})])])},s=[],i=(a("6762"),a("2fdb"),a("7f7f"),a("f744")),o=a("365c"),r={name:"upload",data:function(){return{fileList:[],imgSrc:""}},components:{},methods:{clearPic:function(){this.fileList=[],this.imgSrc=""},setImage:function(t){var e=this;Object(o["B"])().then((function(a){var l=e,s=t.target.files[0],o=i["b"](s,s.name,a,{},{region:i["a"].z2}),r={next:function(t){},error:function(t){console.log(res)},complete:function(t){l.$message.success({message:"上传成功"});var e="http://storage.sankinetwork.com/"+t.key;l.$emit("getUrl",e)}};o.subscribe(r)}));var a=t.target.files[0];if(a.type.includes("image/")){var l=new FileReader;l.onload=function(t){e.imgSrc=t.target.result},l.readAsDataURL(a)}},imageuploaded:function(t){console.log(t)},handleError:function(){this.$notify.error({title:"上传失败",message:"图片上传接口上传失败，可更改为自己的服务器接口"})}},created:function(){this.clearPic()}},n=r,c=(a("a282"),a("2877")),u=Object(c["a"])(n,l,s,!1,null,"6bc7288a",null);e["a"]=u.exports},7674:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-form"},[a("h2",[t._v("4S店铺管理")]),a("hr",{staticStyle:{"margin-bottom":"10px"}}),a("div",{staticClass:"table-area"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("新建")])],1),a("div",{staticStyle:{margin:"10px 0"}},[a("span",[t._v("\n            店铺搜索：\n            "),a("el-input",{staticStyle:{width:"150px",margin:"0 10px"},model:{value:t.shopName,callback:function(e){t.shopName=e},expression:"shopName"}})],1),a("span",[t._v("\n            品牌搜索：\n            "),a("el-input",{staticStyle:{width:"150px",margin:"0 10px"},model:{value:t.brand,callback:function(e){t.brand=e},expression:"brand"}}),a("el-button",{attrs:{icon:"el-icon-search"},on:{click:t.search}})],1)]),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","row-key":"id","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"shopName",label:"店铺名称"}}),a("el-table-column",{attrs:{prop:"brand",label:"品牌"}}),a("el-table-column",{attrs:{label:"品牌图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{directives:[{name:"show",rawName:"v-show",value:t.row.brandPic,expression:"scope.row.brandPic"}],staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.brandPic,"preview-src-list":[t.row.brandPic]}})]}}])}),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),a("el-table-column",{attrs:{prop:"status",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.detail(e.row)}}},[t._v("编辑查看")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.saleDetail(e.row)}}},[t._v("查看销售列表")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.page.no,"page-size":t.page.size,total:t.page.total},on:{"current-change":t.handlePageChange}})],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"create"===t.operate?"创建店铺":"detail"===t.operate?"查看店铺":"编辑店铺",visible:t.dialogVisible,"before-close":t.closeDialog,width:"800px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.form,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"店铺名称"}},[a("el-input",{model:{value:t.form.shopName,callback:function(e){t.$set(t.form,"shopName",e)},expression:"form.shopName"}})],1)],1),a("el-col",{attrs:{span:12}},["create"===t.operate?a("el-form-item",{attrs:{label:"品牌"}},[a("el-input",{model:{value:t.form.brand,callback:function(e){t.$set(t.form,"brand",e)},expression:"form.brand"}})],1):t._e()],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"品牌图片"}},[t.brandPic?t._e():a("el-image",{staticClass:"pic-list-item-img",attrs:{src:t.form.brandPic,"preview-src-list":[t.form.brandPic]}}),a("upload-pic",{ref:"upload",on:{getUrl:t.getUrl}})],1)],1)],1),a("el-row",[a("el-col",{staticStyle:{"text-align":"center",position:"relative"},attrs:{span:24}},[a("el-form-item",{attrs:{label:"地图位置"}},[a("el-amap-search-box",{staticClass:"search-box",staticStyle:{position:"absolute",top:"25px",left:"40px"},attrs:{"search-option":t.searchOption,"on-search-result":t.onSearchResult}}),a("el-amap",{staticStyle:{display:"inline-block",width:"600px",height:"318px"},attrs:{vid:"amapDemo",zoom:12,center:t.mapCenter,events:t.mapEvents}},t._l(t.markers,(function(t,e){return a("el-amap-marker",{key:e,attrs:{position:t}})})),1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("编 辑")])],1)],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"销售人员详情",visible:t.salerDialogVisible,"before-close":t.closeSalerDialog,width:"800px"}},[a("saler-list",{ref:"salerList"}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.salerDialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)])},s=[],i=(a("c5f6"),a("ac6a"),a("365c")),o=a("2ef0"),r=a("6fc2"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-form"},[a("div",{staticClass:"table-area"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("新增")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.salerTableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"memberName",label:"销售名称"}}),a("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),a("el-table-column",{attrs:{prop:"status",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{"white-space":"nowrap"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")])],1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.page.no,"page-size":t.page.size,total:t.page.total},on:{"current-change":t.handlePageChange}})],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"添加销售人员",visible:t.dialogVisible,"before-close":t.closeDialog,"append-to-body":"",width:"800px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.form,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销售名称"}},[a("el-input",{model:{value:t.form.memberName,callback:function(e){t.$set(t.form,"memberName",e)},expression:"form.memberName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)])},c=[],u={name:"SalerList",components:{},data:function(){return{operate:"create",dialogVisible:!1,salerTableData:[],form:{memberName:"",mobile:"",shopId:"",status:1},page:{no:1,total:0,size:20},selectRow:[],shopId:""}},created:function(){},mounted:function(){},methods:{handlePageChange:function(t){this.page.no=t,this.getData()},getData:function(t){var e=this;this.shopId=t.id,Object(i["v"])({id:t.id,page:this.page.no,pageSize:this.page.size}).then((function(t){e.salerTableData=t.records,e.salerDialogVisible=!0}))},handleSelectionChange:function(t){this.selectRow=t},create:function(){this.operate="create",this.form={memberName:"",mobile:"",shopId:this.shopId,status:1},this.openDialog()},edit:function(t){this.operate="edit",t.status=Number(t.status),this.form=t,this.form.shopId=this.shopId,this.openDialog()},detail:function(t){var e=this;shopDetail({id:t.id}).then((function(t){e.operate="detail",e.form=t,e.openDialog()}))},del:function(t){var e=this;this.$confirm("确认删除当前销售人员？").then((function(a){var l=t.id,s={id:l};Object(i["k"])(s).then((function(t){e.$message.success({message:"删除成功"}),e.getData({id:e.shopId})}))})).catch((function(t){}))},save:function(){var t=this,e=Object(o["cloneDeep"])(this.form);if("create"==this.operate){var a=e;Object(i["c"])(a).then((function(e){e&&(t.$message.success({message:"新增成功"}),t.dialogVisible=!1,t.getData({id:t.shopId}))}))}"edit"==this.operate&&Object(i["y"])(e).then((function(e){e&&(t.$message.success({message:"修改成功"}),t.dialogVisible=!1,t.getData())}))},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1}}},d=u,p=(a("496d"),a("2877")),f=Object(p["a"])(d,n,c,!1,null,"7add2f1c",null),m=f.exports,g={name:"userForm",components:{UploadPic:r["a"],SalerList:m},data:function(){return{markers:[],mapCenter:[90,112],searchOption:{city:"全国",citylimit:!1},mapEvents:{init:function(t){console.log(t.getCenter()),t.getCity((function(t){console.log(t)}))}},operate:"create",tableData:[],salerTableData:[],page:{no:1,total:0,size:20},form:{address:"",brand:"",brandPic:"",lat:"",lng:"",shopName:"",status:""},dialogVisible:!1,salerDialogVisible:!1,selectRow:[],brand:"",shopName:"",brandPic:""}},created:function(){this.getData()},mounted:function(){},methods:{onSearchResult:function(t){var e=this,a=0,l=0;if(t.length>0){t.forEach((function(t){var s=t.lng,i=t.lat;l+=s,a+=i,e.markers=[[t.lng,t.lat]]}));var s={lng:l/t.length,lat:a/t.length};this.mapCenter=[s.lng,s.lat]}},search:function(){this.getData()},getUrl:function(t){this.brandPic=t,this.form.brandPic=t},handlePageChange:function(t){this.page.no=t,this.getData()},getData:function(){var t=this,e={pageSize:this.page.size,page:this.page.no,shopName:this.shopName,brand:this.brand};Object(i["x"])(e).then((function(e){t.tableData=e.records,t.page.total=e.total,t.page.no=e.current}))},changeLevel:function(t){this.level=t,this.getData()},handleSelectionChange:function(t){this.selectRow=t},create:function(){var t=this;this.operate="create",this.form={address:"",brand:"",brandPic:"",lat:"",lng:"",shopName:"",status:""},this.openDialog(),this.$nextTick((function(){t.$refs.upload.clearPic()}))},edit:function(t){this.operate="edit",t.status=Number(t.status),this.form=t,this.openDialog()},detail:function(t){var e=this;Object(i["w"])({id:t.id}).then((function(t){console.log(t),e.operate="detail",e.mapCenter=[t.lng,t.lat],e.form=t,e.openDialog(),e.$nextTick((function(){e.$refs.upload.clearPic()}))}))},saleDetail:function(t){var e=this;this.salerDialogVisible=!0,this.$nextTick((function(){e.$refs.salerList.getData(t)}))},del:function(t){this.operate="edit",t.status=Number(t.status),this.form=t,this.form.status=0,this.save()},save:function(){var t=this,e=Object(o["cloneDeep"])(this.form);if(e.lng=this.mapCenter[0],e.lat=this.mapCenter[1],e.brandPic=this.brandPic,"create"==this.operate){var a=e;Object(i["h"])(a).then((function(e){e&&(t.$message.success({message:"创建成功"}),t.dialogVisible=!1,t.getData())}))}"detail"==this.operate&&(delete e.password,Object(i["z"])(e).then((function(e){e&&(t.$message.success({message:"修改成功"}),t.dialogVisible=!1,t.getData())})))},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},closeSalerDialog:function(){this.salerDialogVisible=!1}}},b=g,h=(a("607e"),Object(p["a"])(b,l,s,!1,null,"226ad978",null));e["default"]=h.exports},"7eed":function(t,e,a){},9653:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-form"},[a("h2",[t._v("报障管理")]),a("hr",{staticStyle:{"margin-bottom":"10px"}}),a("div",{staticClass:"table-area"},[a("div",{staticStyle:{margin:"10px"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeTable},model:{value:t.showTableStatus,callback:function(e){t.showTableStatus=e},expression:"showTableStatus"}},[a("el-option",{attrs:{label:"查看待办",value:"undo"}}),a("el-option",{attrs:{label:"查看已办",value:"done"}})],1)],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","row-key":"id","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"contractNo",label:"报修合同号",width:"260"}}),a("el-table-column",{attrs:{prop:"licensePlate",label:"车牌"}}),a("el-table-column",{attrs:{prop:"memberName",label:"客户名"}}),a("el-table-column",{attrs:{prop:"mobile",label:"联系电话",width:"130"}}),a("el-table-column",{attrs:{prop:"reason",label:"原因"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.getStatus(e.row.status))+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"status",label:"操作",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.detail(e.row,"detail")}}},[t._v("详情")]),"0"!==e.row.status&&"3"!=e.row.status&&"4"!=e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.edit(e.row)}}},[t._v("添加记录")]):t._e(),"0"!=e.row.status&&"3"!=e.row.status&&"4"!=e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.detail(e.row,"logs")}}},[t._v("查看记录")]):t._e(),"0"==e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.changeStatus(e.row,1)}}},[t._v("受理")]):t._e(),"0"!=e.row.status&&"3"!=e.row.status&&"4"!=e.row.status?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.changeStatus(e.row,3)}}},[t._v("完成")]):t._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.page.no,"page-size":t.page.size,total:t.page.total},on:{"current-change":t.handlePageChange}})],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"新增记录",visible:t.dialogVisible,"before-close":t.closeDialog,width:"700px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.form,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间记录"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:t.form.processingTime,callback:function(e){t.$set(t.form,"processingTime",e)},expression:"form.processingTime"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"图片"}},[a("upload-pic",{ref:"upload",on:{getUrl:t.getUrl}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"记录"}},[a("el-input",{staticClass:"handle-input mr10",attrs:{type:"textarea"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"报障单详情",visible:t.dialogDetailVisible,"before-close":t.closeDetailDialog,width:"700px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.detailInfo,"label-width":"140px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"合同号："}},[t._v("\n                            "+t._s(t.detailInfo.detail.contractNo)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"受理时间："}},[t._v("\n                            "+t._s(t.detailInfo.detail.createTime)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"车牌："}},[t._v("\n                            "+t._s(t.detailInfo.detail.licensePlate)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"用户名称："}},[t._v("\n                            "+t._s(t.detailInfo.detail.memberName)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"手机号："}},[t._v("\n                            "+t._s(t.detailInfo.detail.mobile)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"原因："}},[t._v("\n                            "+t._s(t.detailInfo.detail.reason)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"状态："}},[t._v("\n                            "+t._s(t.getStatus(t.detailInfo.detail.status))+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"用户上传报障图片："}},[a("div",{staticClass:"pic-list"},t._l(t.detailInfo.file,(function(t,e){return a("div",{key:e,staticClass:"pic-list-item"},[a("el-image",{staticClass:"pic-list-item-img",attrs:{src:t.picUrl,"preview-src-list":[t.picUrl]}})],1)})),0)])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogDetailVisible=!1}}},[t._v("确 定")])],1)],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"报障详细记录",visible:t.dialogLogVisible,"before-close":t.closeLogDialog,width:"700px"}},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.logList,border:"","row-key":"id","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"remark",label:"记录"}}),a("el-table-column",{attrs:{prop:"processingTime",label:"跟进时间"}}),a("el-table-column",{attrs:{prop:"picList",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.files,(function(e,l){return a("div",{key:l,staticClass:"pic-list-item"},[e.picUrl?a("el-image",{staticClass:"pic-list-item-img",attrs:{src:e.picUrl,"preview-src-list":[e.picUrl]}}):t._e()],1)}))}}])}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.delLog(e.row)}}},[t._v("删除记录")])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogLogVisible=!1}}},[t._v("确 定")])],1)],1)],1)])},s=[],i=(a("c5f6"),a("365c")),o=a("2ef0"),r=a("6fc2"),n={name:"ErrorManage",components:{UploadPic:r["a"]},data:function(){return{showTableStatus:"undo",operate:"detail",tableData:[],logList:[],approvalPic:"",page:{no:1,total:0,size:20},form:{remark:"",processingTime:"",picList:[]},detailForm:{},detailInfo:{detail:{}},dialogVisible:!1,dialogDetailVisible:!1,dialogLogVisible:!1,selectRow:[],status:"",postProd:[],cardList:[],selectRowId:""}},created:function(){this.getData()},methods:{getUrl:function(t){this.approvalPic=t},changeTable:function(t){this.showTableStatus=t,this.getData()},getCarInsuranceTitle:function(t){if(0==this.cardList.length)return"";for(var e=0;e<this.cardList.length;e++){var a=this.cardList[e];if(a.id==t)return a.title}},getStatus:function(t){var e=Number(t);switch(e){case 0:return"申请";case 1:return"已受理";case 2:return"处理中";case 3:return"完成";case 4:return"取消"}},changeStatus:function(t,e){var a=this;Object(i["q"])({id:t.id,status:e}).then((function(t){a.$message.success("操作成功"),a.getData()}))},search:function(){this.getData()},handlePageChange:function(t){this.page.no=t,this.getData()},getData:function(){var t=this,e={page:this.page.no,pageSize:this.page.size};"undo"==this.showTableStatus?Object(i["p"])(e).then((function(e){console.log(e.records),t.tableData=e.records,t.page.total=e.total,t.page.no=e.current})):"done"==this.showTableStatus&&Object(i["o"])(e).then((function(e){console.log(e.records),t.tableData=e.records,t.page.total=e.total,t.page.no=e.current}))},handleSelectionChange:function(t){this.selectRow=t},edit:function(t){var e=this;this.operate="edit",t.status=Number(t.status),this.form={picList:[],remark:"",processingTime:""},this.$nextTick((function(){e.$refs.upload.clearPic()})),this.detailForm=t,this.openDialog()},detail:function(t,e){var a=this;this.selectRowId=t.id,Object(i["n"])({id:t.id}).then((function(t){a.detailInfo=t,a.logList=t.logFile||[],"detail"==e&&(a.dialogDetailVisible=!0),"logs"==e&&(a.dialogLogVisible=!0)}))},delLog:function(t){var e=this;this.$confirm("确认删除当前报障单？").then((function(a){var l=t.id,s={id:l};Object(i["j"])(s).then((function(t){e.$message.success({message:"删除成功"}),e.detail({id:e.selectRowId},"logs")}))})).catch((function(t){}))},save:function(){var t=this,e=Object(o["cloneDeep"])(this.form);this.detailForm.id&&(e.guaranteeId=this.detailForm.id),e.picList=[this.approvalPic],"edit"==this.operate&&Object(i["b"])(e).then((function(e){e&&(t.$message.success({message:"添加记录成功"}),t.dialogVisible=!1,t.getData())}))},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},closeLogDialog:function(){this.dialogLogVisible=!1},closeDetailDialog:function(){this.dialogDetailVisible=!1}}},c=n,u=(a("4044"),a("2877")),d=Object(u["a"])(c,l,s,!1,null,"73e72df9",null);e["default"]=d.exports},"9cca":function(t,e,a){},a258:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-form"},[a("h2",[t._v("定价管理")]),a("hr",{staticStyle:{"margin-bottom":"10px"}}),a("div",{staticClass:"table-area"},[a("div",{staticStyle:{height:"50px"}},[a("div",{staticStyle:{float:"left"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("新建")])],1),a("div",{staticStyle:{float:"right"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statusOpt,(function(t){return a("el-option",{key:t.value,attrs:{clearable:"",label:t.label,value:t.value}})})),1),a("el-button",{attrs:{icon:"el-icon-search"},on:{click:t.search}})],1)]),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","row-key":"id","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"车价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.priceCarStart)+" - "+t._s(e.row.priceCarEnd)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"邮品"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.accessoriesList,(function(l,s){return a("span",{key:s},[t._v(t._s(l.title)+" "+t._s(s!==e.row.accessoriesList.length-1?",":""))])}))}}])}),a("el-table-column",{attrs:{label:"卡券"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getCarInsuranceTitle(e.row.carInsuranceId)))])]}}])}),a("el-table-column",{attrs:{prop:"priceContract",label:"合同定价"}}),a("el-table-column",{attrs:{prop:"status",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.edit(e.row)}}},[t._v("修改定价")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.page.no,"page-size":t.page.size,total:t.page.total},on:{"current-change":t.handlePageChange}})],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"create"===t.operate?"新建定价":"detail"===t.operate?"修改定价":"",visible:t.dialogVisible,"before-close":t.closeDialog,width:"700px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.form,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"车价区间"}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:t.form.priceCarStart,callback:function(e){t.$set(t.form,"priceCarStart",t._n(e))},expression:"form.priceCarStart"}})],1),a("el-col",{attrs:{span:1}},[t._v("\n                                -\n                            ")]),a("el-col",{attrs:{span:11}},[a("el-input",{model:{value:t.form.priceCarEnd,callback:function(e){t.$set(t.form,"priceCarEnd",t._n(e))},expression:"form.priceCarEnd"}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"定价"}},[a("el-input",{model:{value:t.form.priceContract,callback:function(e){t.$set(t.form,"priceContract",t._n(e))},expression:"form.priceContract"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.selectStatusOpt,(function(t){return a("el-option",{key:t.value,attrs:{clearable:"",label:t.label,value:t.value}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"卡券"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.carInsuranceId,callback:function(e){t.$set(t.form,"carInsuranceId",e)},expression:"form.carInsuranceId"}},t._l(t.cardList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.title,value:t.id}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"邮品"}},[a("el-checkbox-group",{model:{value:t.form.accessoriesList,callback:function(e){t.$set(t.form,"accessoriesList",e)},expression:"form.accessoriesList"}},t._l(t.postProd,(function(e,l){return a("el-checkbox",{key:l,attrs:{label:e.id}},[t._v(t._s(e.title))])})),1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)])},s=[],i=a("365c"),o=a("2ef0"),r={name:"PriceManage",components:{},data:function(){return{operate:"detail",tableData:[],page:{no:1,total:0,size:20},form:{},dialogVisible:!1,selectRow:[],status:"",selectStatusOpt:[{value:"0",label:"下架"},{value:"1",label:"上架"}],statusOpt:[{value:"0",label:"下架"},{value:"1",label:"上架"},{value:"",label:"全部"}],postProd:[],cardList:[]}},created:function(){this.getData(),this.getPostProduct(),this.getCard()},methods:{getCarInsuranceTitle:function(t){if(0==this.cardList.length)return"";for(var e=0;e<this.cardList.length;e++){var a=this.cardList[e];if(a.id==t)return a.title}},getPostProduct:function(){var t=this,e={};Object(i["a"])(e).then((function(e){t.postProd=e}))},getCard:function(){var t=this,e={};Object(i["r"])(e).then((function(e){t.cardList=e}))},search:function(){this.getData()},handlePageChange:function(){this.getData()},getData:function(){var t=this,e={status:this.status};Object(i["g"])(e).then((function(e){t.tableData=e,t.page.total=e.total,t.page.no=e.current}))},handleSelectionChange:function(t){this.selectRow=t},create:function(){this.operate="create",this.form={priceCarStart:"",priceCarEnd:"",priceContract:"",status:"1",accessoriesList:[]},this.openDialog()},edit:function(t){this.operate="edit";for(var e=[],a=0;a<t.accessoriesList.length;a++){var l=t.accessoriesList[a];e.push(l.id)}this.form=t,this.form.accessoriesList=e,this.openDialog()},detail:function(t){var e=this;contractDetail(t.id).then((function(t){console.log(t),e.operate="detail",e.form=t,e.openDialog()}))},del:function(t){var e=this;this.$confirm("确认删除当前定价？").then((function(a){var l=t.id,s={id:l};Object(i["t"])(s).then((function(t){e.$message.success({message:"删除成功"}),e.getData()}))})).catch((function(t){}))},save:function(){var t=this,e=Object(o["cloneDeep"])(this.form);"create"==this.operate&&Object(i["m"])(e).then((function(e){t.$message.success({message:"创建成功"}),t.dialogVisible=!1,t.getData()})),"edit"==this.operate&&Object(i["u"])(e).then((function(e){e&&(t.$message.success({message:"修改成功"}),t.dialogVisible=!1,t.getData())}))},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1}}},n=r,c=(a("b478"),a("2877")),u=Object(c["a"])(n,l,s,!1,null,"4d1e3bc3",null);e["default"]=u.exports},a282:function(t,e,a){"use strict";var l=a("9cca"),s=a.n(l);s.a},b478:function(t,e,a){"use strict";var l=a("40c1"),s=a.n(l);s.a},f52f:function(t,e,a){}}]);