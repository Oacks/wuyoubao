(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop"],{"34fb":function(t,e,a){"use strict";var s=a("f57f"),l=a.n(s);l.a},3679:function(t,e,a){},"38a1":function(t,e,a){"use strict";var s=a("aa5a"),l=a.n(s);l.a},"454f":function(t,e,a){a("46a7");var s=a("584a").Object;t.exports=function(t,e,a){return s.defineProperty(t,e,a)}},"46a7":function(t,e,a){var s=a("63b6");s(s.S+s.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},5390:function(t,e,a){},"547c":function(t,e,a){},"6fc2":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crop-demo"},[a("div",{staticClass:"crop-demo-btn"},[t._v("选择图片\n            "),a("input",{staticClass:"crop-input",attrs:{type:"file",name:"image",accept:"image/*"},on:{change:t.setImage}})]),a("img",{directives:[{name:"show",rawName:"v-show",value:t.imgSrc,expression:"imgSrc"}],staticClass:"pre-img",attrs:{src:t.imgSrc}})])])},l=[],i=(a("6762"),a("2fdb"),a("7f7f"),a("f744")),o=a("365c"),n={name:"upload",data:function(){return{fileList:[],imgSrc:""}},components:{},methods:{clearPic:function(){this.fileList=[],this.imgSrc=""},setImage:function(t){var e=this;Object(o["L"])().then((function(a){var s=e,l=t.target.files[0],o=i["b"](l,l.name,a,{},{region:i["a"].z2}),n={next:function(t){},error:function(t){console.log(res)},complete:function(t){s.$message.success({message:"上传成功"});var e="http://storage.sankinetwork.com/"+t.key;s.$emit("getUrl",e)}};o.subscribe(n)}));var a=t.target.files[0];if(a.type.includes("image/")){var s=new FileReader;s.onload=function(t){e.imgSrc=t.target.result},s.readAsDataURL(a)}},imageuploaded:function(t){console.log(t)},handleError:function(){this.$notify.error({title:"上传失败",message:"图片上传接口上传失败，可更改为自己的服务器接口"})}},created:function(){this.clearPic()}},r=n,c=(a("a282"),a("2877")),u=Object(c["a"])(r,s,l,!1,null,"6bc7288a",null);e["a"]=u.exports},7674:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-form"},[a("h2",[t._v("4S店铺管理")]),a("hr",{staticStyle:{"margin-bottom":"10px"}}),a("div",{staticClass:"table-area"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("新建")])],1),a("div",{staticStyle:{margin:"10px 0"}},[a("span",[t._v("\n            店铺搜索：\n            "),a("el-input",{staticStyle:{width:"150px",margin:"0 10px"},model:{value:t.shopName,callback:function(e){t.shopName=e},expression:"shopName"}})],1),a("span",[t._v("\n            品牌搜索：\n            "),a("el-input",{staticStyle:{width:"150px",margin:"0 10px"},model:{value:t.brand,callback:function(e){t.brand=e},expression:"brand"}}),a("el-button",{attrs:{icon:"el-icon-search"},on:{click:t.search}})],1)]),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","row-key":"id","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"shopName",label:"店铺名称"}}),a("el-table-column",{attrs:{prop:"brand",label:"品牌"}}),a("el-table-column",{attrs:{label:"品牌图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{directives:[{name:"show",rawName:"v-show",value:t.row.brandPic,expression:"scope.row.brandPic"}],staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.brandPic,"preview-src-list":[t.row.brandPic]}})]}}])}),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),a("el-table-column",{attrs:{prop:"status",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.detail(e.row)}}},[t._v("编辑查看")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.saleDetail(e.row)}}},[t._v("查看销售列表")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.page.no,"page-size":t.page.size,total:t.page.total},on:{"current-change":t.handlePageChange}})],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"create"===t.operate?"创建店铺":"detail"===t.operate?"查看店铺":"编辑店铺",visible:t.dialogVisible,"before-close":t.closeDialog,width:"800px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.form,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"店铺名称"}},[a("el-input",{model:{value:t.form.shopName,callback:function(e){t.$set(t.form,"shopName",e)},expression:"form.shopName"}})],1)],1),a("el-col",{attrs:{span:12}},["create"===t.operate?a("el-form-item",{attrs:{label:"品牌"}},[a("el-input",{model:{value:t.form.brand,callback:function(e){t.$set(t.form,"brand",e)},expression:"form.brand"}})],1):t._e()],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"品牌图片"}},[!t.brandPic&&t.form.brandPic?a("el-image",{staticClass:"pic-list-item-img",attrs:{src:t.form.brandPic,"preview-src-list":[t.form.brandPic]}}):t._e(),a("upload-pic",{ref:"upload",on:{getUrl:t.getUrl}})],1)],1)],1),a("el-row",[a("el-col",{staticStyle:{"text-align":"center",position:"relative"},attrs:{span:24}},[a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"地图位置"}},[a("el-amap-search-box",{staticClass:"search-box",staticStyle:{position:"absolute",top:"25px",left:"40px"},attrs:{"search-option":t.searchOption,"on-search-result":t.onSearchResult}}),a("el-amap",{staticStyle:{display:"inline-block",width:"600px",height:"318px"},attrs:{vid:"amapDemo",zoom:12,center:t.mapCenter,events:t.mapEvents}},t._l(t.markers,(function(t,e){return a("el-amap-marker",{key:e,attrs:{position:t}})})),1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),"create"==t.operate?a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("新 建")]):t._e(),"detail"==t.operate?a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("编 辑")]):t._e()],1)],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"销售人员详情",visible:t.salerDialogVisible,"before-close":t.closeSalerDialog,width:"800px"}},[a("saler-list",{ref:"salerList"}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.salerDialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)])},l=[],i=(a("c5f6"),a("ac6a"),a("365c")),o=a("2ef0"),n=a("6fc2"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-form"},[a("div",{staticClass:"table-area"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("新增")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.salerTableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"memberName",label:"销售名称"}}),a("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),a("el-table-column",{attrs:{prop:"status",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{"white-space":"nowrap"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")])],1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.page.no,"page-size":t.page.size,total:t.page.total},on:{"current-change":t.handlePageChange}})],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"create"==t.operate?"添加销售人员":"edit"==t.operate?"编辑销售人员":"",visible:t.dialogVisible,"before-close":t.closeDialog,"append-to-body":"",width:"800px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.form,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销售名称"}},[a("el-input",{model:{value:t.form.memberName,callback:function(e){t.$set(t.form,"memberName",e)},expression:"form.memberName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1)],1)],1),"edit"==t.operate?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属店铺"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.shopId,callback:function(e){t.$set(t.form,"shopId",e)},expression:"form.shopId"}},t._l(t.shopData,(function(t,e){return a("el-option",{key:e,attrs:{label:t.shopName,value:t.id}})})),1)],1)],1)],1):t._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)])},c=[],u={name:"SalerList",components:{},data:function(){return{operate:"create",dialogVisible:!1,salerTableData:[],form:{memberName:"",mobile:"",shopId:"",status:1},page:{no:1,total:0,size:20},selectRow:[],shopId:"",shopData:""}},created:function(){},mounted:function(){this.getShopData()},methods:{handlePageChange:function(t){this.page.no=t,this.getData()},getData:function(t){var e=this;this.shopId=t.id,Object(i["E"])({id:t.id,page:this.page.no,pageSize:this.page.size}).then((function(t){e.salerTableData=t.records,e.salerDialogVisible=!0}))},getShopData:function(){var t=this,e={pageSize:99999,page:1,shopName:"",brand:""};Object(i["G"])(e).then((function(e){t.shopData=e.records}))},handleSelectionChange:function(t){this.selectRow=Object(o["cloneDeep"])(t)},create:function(){this.operate="create",this.form={memberName:"",mobile:"",shopId:this.shopId,status:1},this.openDialog()},edit:function(t){this.operate="edit",t.status=Number(t.status),this.form=Object(o["cloneDeep"])(t),this.form.shopId=this.shopId,this.openDialog()},detail:function(t){var e=this;shopDetail({id:t.id}).then((function(t){e.operate="detail",e.form=t,e.openDialog()}))},del:function(t){var e=this;this.$confirm("确认删除当前销售人员？").then((function(a){var s=t.id,l={id:s};Object(i["n"])(l).then((function(t){e.$message.success({message:"删除成功"}),e.getData({id:e.shopId})}))})).catch((function(t){}))},save:function(){var t=this,e=Object(o["cloneDeep"])(this.form);if("create"==this.operate){var a=e;Object(i["e"])(a).then((function(e){e&&(t.$message.success({message:"新增成功"}),t.dialogVisible=!1,t.getData({id:t.shopId}))}))}"edit"==this.operate&&Object(i["I"])(e).then((function(e){e&&(t.$message.success({message:"修改成功"}),t.dialogVisible=!1,t.getData({id:t.shopId}))}))},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1}}},d=u,p=(a("e100"),a("2877")),f=Object(p["a"])(d,r,c,!1,null,"c395770a",null),m=f.exports,g={name:"userForm",components:{UploadPic:n["a"],SalerList:m},data:function(){return{disabled:!1,markers:[],mapCenter:[113.122717,23.028762],searchOption:{city:"全国",citylimit:!1},mapEvents:{init:function(t){console.log(t.getCenter()),t.getCity((function(t){console.log(t)}))}},operate:"create",tableData:[],salerTableData:[],page:{no:1,total:0,size:20},form:{address:"",brand:"",brandPic:"",lat:"",lng:"",shopName:"",status:""},dialogVisible:!1,salerDialogVisible:!1,selectRow:[],brand:"",shopName:"",brandPic:""}},created:function(){this.getData()},mounted:function(){},methods:{onSearchResult:function(t){var e=this,a=0,s=0;if(t.length>0){t.forEach((function(t){var l=t.lng,i=t.lat;s+=l,a+=i,e.markers=[[t.lng,t.lat]]}));var l={lng:s/t.length,lat:a/t.length};this.mapCenter=[l.lng,l.lat]}},search:function(){this.getData()},getUrl:function(t){this.brandPic=t,this.form.brandPic=t},handlePageChange:function(t){this.page.no=t,this.getData()},getData:function(){var t=this,e={pageSize:this.page.size,page:this.page.no,shopName:this.shopName,brand:this.brand};Object(i["G"])(e).then((function(e){t.tableData=e.records,t.page.total=e.total,t.page.no=e.current}))},changeLevel:function(t){this.level=t,this.getData()},handleSelectionChange:function(t){this.selectRow=t},create:function(){var t=this;this.operate="create",this.form={address:"",brand:"",brandPic:"",lat:"",lng:"",shopName:"",status:""},this.openDialog(),this.$nextTick((function(){t.$refs.upload.clearPic()}))},edit:function(t){this.operate="edit",t.status=Number(t.status),this.form=Object(o["cloneDeep"])(t),this.openDialog()},detail:function(t){var e=this;Object(i["F"])({id:t.id}).then((function(t){console.log(t),e.operate="detail",e.mapCenter=[t.lng,t.lat],e.form=t,e.brandPic=t.url,e.form.brandPic=t.url,e.openDialog(),e.$nextTick((function(){e.$refs.upload.clearPic()}))}))},saleDetail:function(t){var e=this;this.salerDialogVisible=!0,this.$nextTick((function(){e.$refs.salerList.getData(t)}))},del:function(t){var e=this;this.$confirm("确认删除当前店铺？").then((function(a){var s=t.id,l={id:s};Object(i["o"])(l).then((function(t){e.$message.success({message:"删除成功"}),e.getData()}))})).catch((function(t){}))},save:function(){var t=this;if(!this.disabled){this.disabled=!0,setTimeout((function(){t.disabled=!1}),6e3);var e=Object(o["cloneDeep"])(this.form);if(e.lng=this.mapCenter[0],e.lat=this.mapCenter[1],e.brandPic=this.brandPic,"create"==this.operate){var a=e;Object(i["j"])(a).then((function(e){e&&(t.$message.success({message:"创建成功"}),t.dialogVisible=!1,t.disabled=!1,t.getData())}))}"detail"==this.operate&&Object(i["J"])(e).then((function(e){e&&(t.$message.success({message:"修改成功"}),t.dialogVisible=!1,t.disabled=!1,t.getData())}))}},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},closeSalerDialog:function(){this.salerDialogVisible=!1}}},b=g,h=(a("38a1"),Object(p["a"])(b,s,l,!1,null,"24a9b114",null));e["default"]=h.exports},"85f2":function(t,e,a){t.exports=a("454f")},"8c32":function(t,e,a){"use strict";var s=a("5390"),l=a.n(s);l.a},9653:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-form"},[a("h2",[t._v("报障管理")]),a("hr",{staticStyle:{"margin-bottom":"10px"}}),a("div",{staticClass:"table-area"},[a("div",{staticStyle:{margin:"10px"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeTable},model:{value:t.showTableStatus,callback:function(e){t.showTableStatus=e},expression:"showTableStatus"}},[a("el-option",{attrs:{label:"查看待办",value:"undo"}}),a("el-option",{attrs:{label:"查看已办",value:"done"}})],1),a("el-button",{on:{click:t.getData}},[t._v("刷新")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","row-key":"id","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"contractNo",label:"报修合同号",width:"260"}}),a("el-table-column",{attrs:{prop:"licensePlate",label:"车牌"}}),a("el-table-column",{attrs:{prop:"memberName",label:"客户名"}}),a("el-table-column",{attrs:{prop:"mobile",label:"联系电话",width:"130"}}),a("el-table-column",{attrs:{prop:"reason",label:"原因"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.getStatus(e.row.status))+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"status",label:"操作",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.detail(e.row,"detail")}}},[t._v("详情")]),"0"!==e.row.status&&"3"!=e.row.status&&"4"!=e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.edit(e.row)}}},[t._v("添加记录")]):t._e(),"0"!=e.row.status&&"3"!=e.row.status&&"4"!=e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.detail(e.row,"logs")}}},[t._v("查看记录")]):t._e(),"0"==e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.changeStatus(e.row,1)}}},[t._v("受理")]):t._e(),"0"!=e.row.status&&"3"!=e.row.status&&"4"!=e.row.status?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.changeStatus(e.row,3)}}},[t._v("完成")]):t._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.page.no,"page-size":t.page.size,total:t.page.total},on:{"current-change":t.handlePageChange}})],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"新增记录",visible:t.dialogVisible,"before-close":t.closeDialog,width:"700px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.form,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间记录"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:t.form.processingTime,callback:function(e){t.$set(t.form,"processingTime",e)},expression:"form.processingTime"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"图片"}},[a("upload-pic",{ref:"upload",on:{getUrl:t.getUrl}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"记录"}},[a("el-input",{staticClass:"handle-input mr10",attrs:{type:"textarea"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"报障单详情",visible:t.dialogDetailVisible,"before-close":t.closeDetailDialog,width:"700px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.detailInfo,"label-width":"140px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"合同号："}},[t._v("\n                            "+t._s(t.detailInfo.detail.contractNo)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"受理时间："}},[t._v("\n                            "+t._s(t.detailInfo.detail.createTime)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"车牌："}},[t._v("\n                            "+t._s(t.detailInfo.detail.licensePlate)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"用户名称："}},[t._v("\n                            "+t._s(t.detailInfo.detail.memberName)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"手机号："}},[t._v("\n                            "+t._s(t.detailInfo.detail.mobile)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"原因："}},[t._v("\n                            "+t._s(t.detailInfo.detail.reason)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"状态："}},[t._v("\n                            "+t._s(t.getStatus(t.detailInfo.detail.status))+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"用户上传报障图片："}},[a("div",{staticClass:"pic-list"},t._l(t.detailInfo.file,(function(t,e){return a("div",{key:e,staticClass:"pic-list-item"},[a("el-image",{staticClass:"pic-list-item-img",attrs:{src:t.picUrl,"preview-src-list":[t.picUrl]}})],1)})),0)])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogDetailVisible=!1}}},[t._v("确 定")])],1)],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"报障详细记录",visible:t.dialogLogVisible,"before-close":t.closeLogDialog,width:"700px"}},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.logList,border:"","row-key":"id","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"remark",label:"记录"}}),a("el-table-column",{attrs:{prop:"processingTime",label:"跟进时间"}}),a("el-table-column",{attrs:{prop:"userName",label:"操作人"}}),a("el-table-column",{attrs:{prop:"picList",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.files,(function(e,s){return a("div",{key:s,staticClass:"pic-list-item"},[e.picUrl?a("el-image",{staticClass:"pic-list-item-img",attrs:{src:e.picUrl,"preview-src-list":[e.picUrl]}}):t._e()],1)}))}}])}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.delLog(e.row)}}},[t._v("删除记录")])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogLogVisible=!1}}},[t._v("确 定")])],1)],1)],1)])},l=[],i=(a("c5f6"),a("365c")),o=a("2ef0"),n=a("6fc2"),r={name:"ErrorManage",components:{UploadPic:n["a"]},data:function(){return{showTableStatus:"undo",operate:"detail",tableData:[],logList:[],approvalPic:"",page:{no:1,total:0,size:20},form:{remark:"",processingTime:"",picList:[]},detailForm:{},detailInfo:{detail:{}},dialogVisible:!1,dialogDetailVisible:!1,dialogLogVisible:!1,selectRow:[],status:"",postProd:[],cardList:[],selectRowId:""}},created:function(){this.getData()},methods:{getUrl:function(t){this.approvalPic=t},changeTable:function(t){this.showTableStatus=t,this.getData()},getCarInsuranceTitle:function(t){if(0==this.cardList.length)return"";for(var e=0;e<this.cardList.length;e++){var a=this.cardList[e];if(a.id==t)return a.title}},getStatus:function(t){var e=Number(t);switch(e){case 0:return"申请";case 1:return"已受理";case 2:return"处理中";case 3:return"完成";case 4:return"取消"}},changeStatus:function(t,e){var a=this;Object(i["x"])({id:t.id,status:e}).then((function(t){a.$message.success("操作成功"),a.getData()}))},search:function(){this.getData()},handlePageChange:function(t){this.page.no=t,this.getData()},getData:function(){var t=this,e={page:this.page.no,pageSize:this.page.size};"undo"==this.showTableStatus?Object(i["w"])(e).then((function(e){console.log(e.records),t.tableData=e.records,t.page.total=e.total,t.page.no=e.current})):"done"==this.showTableStatus&&Object(i["v"])(e).then((function(e){console.log(e.records),t.tableData=e.records,t.page.total=e.total,t.page.no=e.current}))},handleSelectionChange:function(t){this.selectRow=Object(o["cloneDeep"])(t)},edit:function(t){var e=this;this.operate="edit",t.status=Number(t.status),this.approvalPic="",this.form={picList:[],remark:"",processingTime:""},this.$nextTick((function(){e.$refs.upload.clearPic()})),this.detailForm=Object(o["cloneDeep"])(t),this.openDialog()},detail:function(t,e){var a=this;this.selectRowId=t.id,Object(i["u"])({id:t.id}).then((function(t){a.detailInfo=t,a.logList=t.logFile||[],"detail"==e&&(a.dialogDetailVisible=!0),"logs"==e&&(a.dialogLogVisible=!0)}))},delLog:function(t){var e=this;this.$confirm("确认删除当前报障单？").then((function(a){var s=t.id,l={id:s};Object(i["l"])(l).then((function(t){e.$message.success({message:"删除成功"}),e.detail({id:e.selectRowId},"logs")}))})).catch((function(t){}))},save:function(){var t=this,e=Object(o["cloneDeep"])(this.form);this.detailForm.id&&(e.guaranteeId=this.detailForm.id),e.picList=[this.approvalPic],"edit"==this.operate&&Object(i["b"])(e).then((function(e){e&&(t.$message.success({message:"添加记录成功"}),t.dialogVisible=!1,t.getData())}))},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},closeLogDialog:function(){this.dialogLogVisible=!1},closeDetailDialog:function(){this.dialogDetailVisible=!1}}},c=r,u=(a("8c32"),a("2877")),d=Object(u["a"])(c,s,l,!1,null,"25e0e2f6",null);e["default"]=d.exports},"9cca":function(t,e,a){},a258:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-form"},[a("h2",[t._v("定价管理")]),a("hr",{staticStyle:{"margin-bottom":"10px"}}),a("div",{staticClass:"table-area"},[a("div",{staticStyle:{height:"50px"}},[a("div",{staticStyle:{float:"left"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.create}},[t._v("新建")])],1),a("div",{staticStyle:{float:"right"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statusOpt,(function(t){return a("el-option",{key:t.value,attrs:{clearable:"",label:t.label,value:t.value}})})),1),a("el-button",{attrs:{icon:"el-icon-search"},on:{click:t.search}})],1)]),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","row-key":"id","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"车价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.priceCarStart)+" - "+t._s(e.row.priceCarEnd)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"邮品"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.accessoriesList,(function(s,l){return a("span",{key:l},[t._v(t._s(s.title)+" "+t._s(l!==e.row.accessoriesList.length-1?",":""))])}))}}])}),a("el-table-column",{attrs:{label:"卡券"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.getCarInsuranceTitle(e.row.carInsuranceId)))])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.edit(e.row)}}},[t._v("修改定价")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.page.no,"page-size":t.page.size,total:t.page.total},on:{"current-change":t.handlePageChange}})],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"create"===t.operate?"新建定价":"detail"===t.operate?"修改定价":"",visible:t.dialogVisible,"before-close":t.closeDialog,width:"700px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.form,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"车价区间"}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:t.form.priceCarStart,callback:function(e){t.$set(t.form,"priceCarStart",t._n(e))},expression:"form.priceCarStart"}})],1),a("el-col",{attrs:{span:1}},[t._v("\n                                -\n                            ")]),a("el-col",{attrs:{span:11}},[a("el-input",{model:{value:t.form.priceCarEnd,callback:function(e){t.$set(t.form,"priceCarEnd",t._n(e))},expression:"form.priceCarEnd"}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.selectStatusOpt,(function(t){return a("el-option",{key:t.value,attrs:{clearable:"",label:t.label,value:t.value}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"卡券"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.carInsuranceId,callback:function(e){t.$set(t.form,"carInsuranceId",e)},expression:"form.carInsuranceId"}},t._l(t.cardList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.title,value:t.id}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"邮品"}},[a("el-checkbox-group",{model:{value:t.form.accessoriesList,callback:function(e){t.$set(t.form,"accessoriesList",e)},expression:"form.accessoriesList"}},t._l(t.postProd,(function(e,s){return a("el-checkbox",{key:s,attrs:{label:e.id}},[t._v(t._s(e.title))])})),1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)])},l=[],i=a("365c"),o=a("2ef0"),n={name:"PriceManage",components:{},data:function(){return{disabled:!1,operate:"detail",tableData:[],page:{no:1,total:0,size:20},form:{},dialogVisible:!1,selectRow:[],status:"",selectStatusOpt:[{value:"0",label:"下架"},{value:"1",label:"上架"}],statusOpt:[{value:"0",label:"下架"},{value:"1",label:"上架"},{value:"",label:"全部"}],postProd:[],cardList:[]}},created:function(){this.getData(),this.getPostProduct(),this.getCard()},methods:{getCarInsuranceTitle:function(t){if(0==this.cardList.length)return"";for(var e=0;e<this.cardList.length;e++){var a=this.cardList[e];if(a.id==t)return a.title}},getPostProduct:function(){var t=this,e={};Object(i["a"])(e).then((function(e){t.postProd=e}))},getCard:function(){var t=this,e={};Object(i["y"])(e).then((function(e){t.cardList=e}))},search:function(){this.getData()},handlePageChange:function(){this.getData()},getData:function(){var t=this,e={status:this.status};Object(i["i"])(e).then((function(e){t.tableData=e,t.page.total=e.total,t.page.no=e.current}))},handleSelectionChange:function(t){this.selectRow=Object(o["cloneDeep"])(t)},create:function(){this.operate="create",this.form={priceCarStart:"",priceCarEnd:"",priceContract:"",status:"1",accessoriesList:[]},this.openDialog()},edit:function(t){this.operate="edit";for(var e=[],a=0;a<t.accessoriesList.length;a++){var s=t.accessoriesList[a];e.push(s.id)}this.form=Object(o["cloneDeep"])(t),this.form.accessoriesList=Object(o["cloneDeep"])(e),this.openDialog()},detail:function(t){var e=this;contractDetail(t.id).then((function(t){console.log(t),e.operate="detail",e.form=t,e.openDialog()}))},del:function(t){var e=this;this.$confirm("确认删除当前定价？").then((function(a){var s=t.id,l={id:s};Object(i["B"])(l).then((function(t){e.$message.success({message:"删除成功"}),e.getData()}))})).catch((function(t){}))},save:function(){var t=this;if(!this.disabled){var e=Object(o["cloneDeep"])(this.form);this.disabled=!0,setTimeout((function(){t.disabled=!1}),6e3),"create"==this.operate&&Object(i["s"])(e).then((function(e){t.$message.success({message:"创建成功"}),t.dialogVisible=!1,t.disabled=!1,t.getData()})),"edit"==this.operate&&Object(i["C"])(e).then((function(e){e&&(t.$message.success({message:"修改成功"}),t.dialogVisible=!1,t.disabled=!1,t.getData())}))}},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1}}},r=n,c=(a("34fb"),a("2877")),u=Object(c["a"])(r,s,l,!1,null,"34fddf15",null);e["default"]=u.exports},a282:function(t,e,a){"use strict";var s=a("9cca"),l=a.n(s);l.a},aa5a:function(t,e,a){},b072:function(t,e,a){"use strict";var s=a("547c"),l=a.n(s);l.a},b262:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-form"},[a("h2",[t._v("发卡管理")]),a("hr",{staticStyle:{"margin-bottom":"10px"}}),a("div",{staticClass:"table-area"},[a("div",{staticStyle:{margin:"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.askSendCard}},[t._v("申请发卡")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","row-key":"id","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"insurancePrice",label:"保险卡金额"}}),a("el-table-column",{attrs:{prop:"accessoriesPrice",label:"邮品金额"}}),a("el-table-column",{attrs:{prop:"createTime",label:"申请时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.transFormTime(e.row.createTime))+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"totalPrice",label:"总价"}}),a("el-table-column",{attrs:{prop:"operator",label:"操作人"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(0==e.row.status?"申请":1==e.row.status?"审批":"")+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"status",label:"操作",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.detail(e.row,"detail")}}},[t._v("明细")]),1==e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.checkCardList(e.row)}}},[t._v("卡号列表")]):t._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.page.no,"page-size":t.page.size,total:t.page.total},on:{"current-change":t.handlePageChange}})],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"合同列表",visible:t.contractDialogVisible,"before-close":t.closeContractDialog,width:"900px"}},[a("send-card-contract-list",{ref:"sendCardList",on:{refresh:t.getData}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.contractDialogVisible=!1}}},[t._v("完 成")])],1)],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"卡号列表",visible:t.cardDialogVisible,"before-close":t.closeCardDialog,width:"900px"}},[t._l(t.cardList,(function(e,s){return a("div",{key:s},[t._v(t._s(e.insuranceId))])})),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cardDialogVisible=!1}}},[t._v("完 成")])],1)],2)],1)])},l=[],i=(a("c5f6"),a("365c")),o=a("2ef0"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods-form"},[a("div",{staticStyle:{margin:"10px 0"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.searchForm,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:8}}),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"会员姓名"}},[a("el-input",{model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),a("div",[a("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")]),"create"==t.sendCardOperate?a("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:t.sendCard}},[t._v("申请发卡")]):t._e()],1)],1)],1)],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","row-key":"id","header-cell-class-name":"table-header"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"合同号"}}),a("el-table-column",{attrs:{prop:"memberName",label:"客户名"}}),a("el-table-column",{attrs:{prop:"status",label:"合同状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.getStatus(e.row.status))+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"price",label:"合同金额"}}),a("el-table-column",{attrs:{prop:"status",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{"white-space":"nowrap"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.detail(e.row)}}},[t._v("查看详情")])],1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.page.no,"page-size":t.page.size,total:t.page.total},on:{"current-change":t.handlePageChange}})],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"detail"===t.operate?"查看合同":"",visible:t.dialogVisible,"before-close":t.closeDialog,"append-to-body":"",width:"900px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.detailInfo,"label-width":"140px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同号："}},[t._v("\n                            "+t._s(t.detailInfo.contractNo)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车主姓名："}},[t._v("\n                            "+t._s(t.detailInfo.memberName)+"\n                        ")])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话："}},[t._v("\n                            "+t._s(t.detailInfo.mobile)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系地址："}},[t._v("\n                            "+t._s(t.detailInfo.address)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆品牌："}},[t._v("\n                            "+t._s(t.detailInfo.brand)+"\n                        ")])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆型号："}},[t._v("\n                            "+t._s(t.detailInfo.vehicle)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆购买时间："}},[t._v("\n                            "+t._s(t.detailInfo.carBuyTime)+"\n                        ")])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆类型："}},[t._v("\n                            "+t._s("0"==t.detailInfo.carType?"新车":"1"==t.detailInfo.carType?"旧车":"")+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"原厂保修起始日期："}},[t._v("\n                            "+t._s(t.detailInfo.oldStartTime)+"\n                        ")])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"原厂保修结束日期："}},[t._v("\n                            "+t._s(t.detailInfo.oldEndTime)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车架号（VIN）："}},[t._v("\n                            "+t._s(t.detailInfo.vin)+"\n                        ")])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发动机号："}},[t._v("\n                            "+t._s(t.detailInfo.engineNum)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车牌号码："}},[t._v("\n                            "+t._s(t.detailInfo.licensePlate)+"\n                        ")])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆售出价格："}},[t._v("\n                            "+t._s(t.detailInfo.carPrice)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"延保销售日期"}},[t._v("\n                            "+t._s(t.detailInfo.createTime)+"\n                        ")])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"延保卡券："}},[t._v("\n                            "+t._s(t.detailInfo.projectId)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"延保起期："}},[t._v("\n                            "+t._s(t.detailInfo.startTime)+"\n                        ")])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"行驶里程："}},[t._v("\n                            "+t._s(t.detailInfo.mileage)+"\n                        ")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:4!=t.detailInfo.status?"邮品：":"邮品卡号："}},[4!=t.detailInfo.status?a("div",t._l(t.detailInfo.accessoriesList,(function(e,s){return a("div",{key:s},[t._v(t._s(e.title))])})),0):t._e(),4==t.detailInfo.status?a("div",t._l(t.detailInfo.saleList,(function(e,s){return 1==e.saleType?a("div",{key:s},[t._v(t._s(e.title))]):t._e()})),0):t._e()])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"合同图片："}},[a("div",{staticClass:"pic-list"},[a("el-image",{staticClass:"pic-list-item-img",attrs:{src:t.detailInfo.pic,"preview-src-list":[t.detailInfo.pic]}})],1)])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"审批资料",visible:t.approvalDialogVisible,"before-close":t.closeApprovalDialog,width:"700px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.form,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"合同图片上传"}},[a("upload-pic",{ref:"upload",on:{getUrl:t.getUrl}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.approvalDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.approval}},[t._v("提交审批")])],1)],1),a("el-dialog",{staticClass:"user-dialog",attrs:{"close-on-click-modal":!1,title:"合同图片",visible:t.contractDialogVisible,"before-close":t.closeContractDialog,"append-to-body":"",width:"700px"}},[a("el-image",{staticClass:"stamp-pic",attrs:{src:t.contractPic}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.contractDialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},r=[],c=(a("7f7f"),a("bd86")),u=a("6fc2"),d={name:"SendCardContractList",components:{UploadPic:u["a"]},data:function(){var t;return t={sendCardOperate:"create",contractDialogVisible:!1,contractPic:"",operate:"detail",tableData:[],name:"",detailInfo:{},page:{no:1,total:0,size:20},searchForm:{contractEndTime:"",contractStartTime:"",endTime:"",memberName:"",startTime:"",status:""},form:{address:"",brand:"",brandPic:"",lat:"",lng:"",status:""},selectContractId:"",dialogVisible:!1,approvalDialogVisible:!1,selectRow:[],contractValid:[],contractTime:[],status:"3"},Object(c["a"])(t,"name",""),Object(c["a"])(t,"approvalPic",""),Object(c["a"])(t,"approvalId",""),Object(c["a"])(t,"statusOpt",[{value:"1",label:"受理中"},{value:"2",label:"受理审核中"},{value:"3",label:"保单确认，未启保"},{value:"4",label:"保单启保中"}]),t},created:function(){},methods:{getUrl:function(t){this.approvalPic=t},approvalReady:function(t){var e=this;this.approvalId=t.id,this.approvalDialogVisible=!0,this.$nextTick((function(){e.$refs.upload.clearPic()}))},closeApprovalDialog:function(){this.approvalDialogVisible=!1},exportContract:function(t){var e=document.createElement("a");e.href="https://wuyoubao.sankinetwork.com/api/wyht/eportContract?id="+t.id,e.setAttribute("download",name),document.body.appendChild(e),e.click()},getStatus:function(t){for(var e=0;e<this.statusOpt.length;e++){var a=this.statusOpt[e];if(t==a.value)return a.label}},approval:function(){var t=this;if(""!=this.approvalPic){var e={id:this.approvalId,status:"2",pic:this.approvalPic};Object(i["f"])(e).then((function(e){t.$message.success({message:"提交审批成功"}),t.closeApprovalDialog(),t.getData()}))}else this.$message.warning({message:"请先上传合同图片"})},search:function(){this.getData()},handlePageChange:function(){this.getData()},getContractData:function(t){var e=this;Object(i["t"])({id:t,page:1,pageSize:99999}).then((function(t){console.log(t),e.tableData=t.records,e.page.total=t.total,e.page.no=t.current}))},getData:function(){var t=this,e={pageSize:1e5,page:this.page.no,contractEndTime:this.contractValid[1]||"",contractStartTime:this.contractValid[0]||"",memberName:this.name,startTime:this.contractTime[0]||"",endTime:this.contractTime[1]||"",status:this.status};Object(i["h"])(e).then((function(e){t.tableData=e.records,t.page.total=e.total,t.page.no=e.current}))},handleSelectionChange:function(t){this.selectRow=t},sendCard:function(){var t=this;this.selectRow||this.$message.warning("请先选择要申请发卡的合同");for(var e=[],a=0;a<this.selectRow.length;a++){var s=this.selectRow[a];console.log(s),e.push(s.id)}try{var l=JSON.stringify(e);Object(i["c"])(l).then((function(e){t.$emit("refresh"),t.$message.success("申请成功"),t.getData()}))}catch(o){console.log(o)}},editSendCard:function(){var t=this;this.selectRow||this.$message.warning("请先选择本次要发卡的合同");for(var e=[],a=0;a<this.selectRow.length;a++){var s=this.selectRow[a];console.log(s),e.push(s.id)}try{JSON.stringify(e);var l={id:this.selectContractId,ids:e};Object(i["H"])(l).then((function(e){t.$emit("refresh"),t.$message.success("修改成功"),t.getContractData(t.selectContractId)}))}catch(o){console.log(o)}},edit:function(t){this.operate="edit",t.status=Number(t.status),this.form=Object(o["cloneDeep"])(t),this.openDialog()},detail:function(t){var e=this;Object(i["g"])({id:t.id}).then((function(t){e.detailInfo=t,e.operate="detail",e.form=t,e.openDialog()}))},save:function(){var t=this,e=Object(o["cloneDeep"])(this.form);"edit"==this.operate&&userUpdate(e).then((function(e){e&&(t.$message.success({message:"修改成功"}),t.dialogVisible=!1,t.getData())}))},showContract:function(t){this.contractDialogVisible=!0,this.contractPic=t.pic},closeContractDialog:function(){this.contractDialogVisible=!1},openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1}}},p=d,f=(a("b072"),a("2877")),m=Object(f["a"])(p,n,r,!1,null,"0b8c9c75",null),g=m.exports,b={name:"ErrorManage",components:{SendCardContractList:g},data:function(){return{showTableStatus:"undo",operate:"detail",tableData:[],logList:[],page:{no:1,total:0,size:20},form:{remark:"",processingTime:"",picList:[]},detailForm:{},selectRow:[],status:"",postProd:[],cardList:[],selectRowId:"",contractDialogVisible:!1,cardDialogVisible:!1}},created:function(){this.getData()},methods:{transFormTime:function(t){if(!t)return"";var e=new Date(t),a=e.getFullYear()+"-",s=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",l=e.getDate()+" ",i=e.getHours()+":",o=e.getMinutes()+":",n=e.getSeconds();return a+s+l+i+o+n},askSendCard:function(){var t=this;this.contractDialogVisible=!0,this.$nextTick((function(){t.$refs.sendCardList.sendCardOperate="create",t.$refs.sendCardList.selectContractId="",t.$refs.sendCardList.getData()}))},checkCardList:function(t){var e=this;Object(i["t"])({id:t.id,page:1,pageSize:9999}).then((function(t){e.cardList=t.records,e.cardDialogVisible=!0}))},changeTable:function(t){this.showTableStatus=t,this.getData()},getCarInsuranceTitle:function(t){if(0==this.cardList.length)return"";for(var e=0;e<this.cardList.length;e++){var a=this.cardList[e];if(a.id==t)return a.title}},getStatus:function(t){var e=Number(t);switch(e){case 1:return"申请";case 2:return"回退";case 3:return"审核"}},changeStatus:function(t,e){var a=this;Object(i["x"])({id:t.id,status:e}).then((function(t){a.$message.success("操作成功"),a.getData()}))},search:function(){this.getData()},handlePageChange:function(t){this.page.no=t,this.getData()},getData:function(){var t=this,e={page:this.page.no,pageSize:this.page.size,status:""};Object(i["D"])(e).then((function(e){console.log(e.records),t.tableData=e.records,t.page.total=e.total,t.page.no=e.current}))},handleSelectionChange:function(t){this.selectRow=t},edit:function(t){var e=this;this.operate="edit",t.status=Number(t.status),this.form={picList:[],remark:"",processingTime:""},this.$nextTick((function(){e.$refs.upload.clearPic()})),this.detailForm=Object(o["cloneDeep"])(t),this.openDialog()},detail:function(t,e){var a=this;this.contractDialogVisible=!0,this.$nextTick((function(){a.$refs.sendCardList.sendCardOperate="edit",a.$refs.sendCardList.selectContractId=t.id,a.$refs.sendCardList.getContractData(t.id)}))},del:function(t){var e=this;this.$confirm("确认删除当前发卡申请？").then((function(a){var s=t.id,l={id:s};Object(i["m"])(l).then((function(t){e.$message.success({message:"删除成功"}),e.getData()}))})).catch((function(t){}))},save:function(){var t=this,e=Object(o["cloneDeep"])(this.form);this.detailForm.id&&(e.guaranteeId=this.detailForm.id),"edit"==this.operate&&Object(i["b"])(e).then((function(e){e&&(t.$message.success({message:"添加记录成功"}),t.dialogVisible=!1,t.getData())}))},openContractDialog:function(){this.contractDialogVisible=!0},closeContractDialog:function(){this.contractDialogVisible=!1},closeCardDialog:function(){this.cardDialogVisible=!1}}},h=b,v=(a("cc2b"),Object(f["a"])(h,s,l,!1,null,"16fdc32c",null));e["default"]=v.exports},bd86:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var s=a("85f2"),l=a.n(s);function i(t,e,a){return e in t?l()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},cc2b:function(t,e,a){"use strict";var s=a("d182"),l=a.n(s);l.a},d182:function(t,e,a){},e100:function(t,e,a){"use strict";var s=a("3679"),l=a.n(s);l.a},f57f:function(t,e,a){}}]);